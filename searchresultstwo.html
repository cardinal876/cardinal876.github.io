<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>edwinbook search</title>

<link rel="stylesheet" href="header.css"> <!-- NEW: CSS loads before JS -->
 <script src="data.js"></script>

  

<style>
:root {
  --bg-color: #ffffff;
  --text-color: #111111;
  --accent-color: #10a37f;
  --border-color: #e2e2e2;
  --input-bg: #f9f9f9;
}

* { box-sizing: border-box; }

body {
    visibility:hidden;
  margin: 0;
  padding: 0;
  font-family: system-ui, sans-serif;
  background-color: var(--bg-color);
  color: var(--text-color);
  display: flex;
  flex-direction: column;
  min-height: 100vh;
}



    


/* RESULTS */
.results {
  width: 100%;
  max-width: 700px;
  padding: 1rem 1.5rem;
  margin: 0 auto;
  box-sizing: border-box;
  flex: 1;
}

.result-link {
  display: block;
  text-decoration: none;
  color: inherit;
  border-bottom: 1px solid var(--border-color);
  padding: 1rem 0;
  transition: background-color 0.2s ease;
}

.result-title {
  font-size: 1.25rem;
  font-weight: 400; 
  color: #1a0dab;    
  margin: 0;
  text-decoration: none;
  width: fit-content; 
}

.result-title:hover { text-decoration: underline; }
.result-link:hover { background-color: #f5f5f5; }

.author { font-size: 0.9rem; color: #666; margin-top: 0.25rem;}
.snippet { margin-top: 0.5rem; font-size: 1rem; color: #333; }

footer {
  text-align: center;
  padding: 1rem;
  font-size: 0.9rem;
  color: #888;
  border-top: 1px solid var(--border-color);
  width: 100%;
}













</style>

<script src="https://cdn.jsdelivr.net/npm/flexsearch@0.7.31/dist/flexsearch.bundle.js"></script>
</head>
<body>

 <header id="header-container"></header>



<div class="results">
  <a href="result1005.html" class="result-link">
    <h2 class="result-title">Relativity</h2>
    <div class="author"></div>
    <div class="snippet">
        Relativity is one of the most important and far-reaching ideas in modern science. It changed the way people understand space, time, gravity, and even the nature of the universe itself.
    </div>
  </a>
</div>




<div id="results"></div> <!-- search results will appear here -->








  <footer>
    &copy; 2025 Celbook Education and Learningâ„¢. <a href="terms.html" style="text-decoration:none;color:inherit;" >Terms & Conditions</a>

  </footer>


  
  <script>
    // Sample documents for FlexSearch
 /**   const documents = [
      { id: 1, title: "Apple", content: "A red or green fruit" },
      { id: 2, title: "Banana", content: "A long yellow fruit" },
      { id: 3, title: "Cherry", content: "Small red fruit" },
      { id: 4, title: "Date", content: "Sweet brown fruit" }
    ];
    **/

    // Create FlexSearch index
    const index = new FlexSearch.Document({
      document: {
        id: "id",
        index: ["title", "content","url"],
        store: ["id","title", "content","url"]
      }
    });
    
    // Add documents from external JS
if (typeof documents !== 'undefined' && Array.isArray(documents)) {
  documents.forEach(doc => index.add(doc));
} else {
  console.error("No documents found in data.js");
}

    // Add docs to index
  //  documents.forEach(doc => index.add(doc));

    // Load header.html dynamically
    document.addEventListener('DOMContentLoaded', () => {
      const xhr = new XMLHttpRequest();
      xhr.open('GET', 'header2.html', true);
      xhr.onreadystatechange = function() {
        if (xhr.readyState === 4 && (xhr.status === 200 || xhr.status == 0)) {
          document.getElementById('header-container').innerHTML = xhr.responseText;

          // Menu toggle logic (optional)
          const menuButton = document.getElementById("menuToggle");
          const menuDropdown = document.getElementById("menuDropdown");
          if (menuButton && menuDropdown) {
            menuButton.addEventListener("click", () => {
              menuDropdown.style.display =
                menuDropdown.style.display === "flex" ? "none" : "flex";
            });
            document.addEventListener("click", (e) => {
              if (!menuButton.contains(e.target) && !menuDropdown.contains(e.target)) {
                menuDropdown.style.display = "none";
              }
            });
          }

          // Attach search logic
          const searchForm = document.getElementById('searchForm');
          const searchInput = document.getElementById('searchInput');
          const resultsContainer = document.getElementById('results');

          if (searchForm && searchInput && resultsContainer) {
            searchForm.addEventListener('submit', (e) => {
              e.preventDefault();
              const query = searchInput.value.trim();
              if (!query) {
                resultsContainer.innerHTML = "<p>Please enter a search term</p>";
                return;
              }

              // Search using FlexSearch
              const searchResults = index.search(query, { enrich: true, limit: 100, index: ["title", "content", "url"] });


              // Flatten results because it's returned by field
              

const seen = new Set();
const flatResults = [];

searchResults.forEach(fieldResult => {
  fieldResult.result.forEach(r => {
      
    if (!seen.has(r.doc.id)) {
      seen.add(r.doc.id);
      flatResults.push(r.doc);
    }
  });
});


              
              
              
              

              // Show results
              if (flatResults.length === 0) {
                resultsContainer.innerHTML = "<p>No results found</p>";
              } else {
                
                
                
                
                const WORDS_TO_SHOW = 30; // <-- adjustable number of words

resultsContainer.innerHTML = flatResults.map(r => {
  // Split content into words and take the first N words
  const words = r.content.split(/\s+/).slice(0, WORDS_TO_SHOW).join(' ');
  const more = r.content.split(/\s+/).length > WORDS_TO_SHOW ? "..." : "";
  
  return `
    
    <div class="results">
  <a href="${r.url}" class="result-link">
    <h2 class="result-title">${r.title}</h2>
    <div class="author"></div>
    <div class="snippet">${words}${more}</div>
  </a>
</div>
  `;
}).join('');
                
                
                
                
              }
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
            });
          }

          document.body.style.visibility = 'visible';
        } else if (xhr.readyState === 4) {
          console.error('Failed to load header.html');
        }
      };
      xhr.send();
    });
  </script>





</body>
</html>
